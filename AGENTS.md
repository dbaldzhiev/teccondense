---
applyTo: '**'
---
„Кондензационен пад“ (BG норми)
1) Цел и обхват

Да реализира изчисления за риск от повърхностна и вътрешна кондензация в многослойни ограждащи конструкции (стени, покриви, тавани/подове към неотопляеми обеми), за отопляеми помещения с продължителна φ < 70%. Подове/стени към земя не се изчисляват за кондензационен пад. 

Да прилага методиката от Приложение № 6 (чл. 25, ал. 5): температурно поле, парциални/максимални налягания, зона на кондензация, количеството конденз, навлажняване и проверка на съхнене. 

2) Нормативна база, допускания и режими

Периоди: за сгради без климатизация приемай период на дифузионно навлажняване tk = 1440 h и период на съхнене tu = 1440 h. За съхнене ползвай θi = θe = 18°C и φi = φe = 65% (освен ако проектът задава други условия). 

За периода на кондензация използвай φe = 90% и външна температура θe според външната проектна температура на климатичната зона:
• θe = 5°C ако проектната е > −8.5°C; • θe = −5°C ако е между −8.5°C и −14.5°C; • θe = −10°C ако е < −14.5°C. (Вътрешните θi, φi – от заданието.) 

Повърхностна кондензация: доказва се чрез вътрешната повърхностна температура (θsi ≥ θs), където θs е температура на оросяване (табл. 2.1), а θsi се намира по формула (2.4). 

Материали без данни за μ/влажности не се допускат в зони с очакван кондензационен пад. 

3) Входове (JSON схема)

layers[]: от вътре навън; за всеки слой:
{ name, d[m], lambda[W/mK], mu[-], rho[kg/m3], xr_percent, xmax_percent }
(μ по табл. 1 на Прил. №4; xr′ и xmax по табл. 2 на Прил. №4 – изисква локална библиотека от материали.) 

Rsi, Rse (по БДС EN ISO 6946 – конфигурируеми). 

climate: външна проектна температура на населеното място (за избор на θe в периода на кондензация).

indoor: {θi[°C], φi[%]} за периода на кондензация (или default от заданието).

Флагове: has_HVAC (ако да – и за съхненето се ползват действителни θ, φ). 

4) Изчислителни стъпки (ядро на алгоритъма, „Глазер“ по методиката)
4.1 Топлотехническа част

Изчисли U и q:

ΣR = Rsi + Σ(d/λ) + Rse; U = 1/ΣR; q = U·(θi − θe). (Използва се в (2.4) и профила T(x).) 

Температури:

Вътрешна повърхност: θsi = θi − q·Rsi (формула (2.4)).

Температура на граници между слоевете: θk = θi − q·(Rsi + Σj≤k dj/λj) (по (2.6)). 

4.2 Паропреминаване без кондензация

Съпротивление за дифузия: за слой zj = μj·dj (m²hPa/kg) при 10°C; за конструкцията z = Σzj (2.1)–(2.2). 

Максимално налягане на водна пара p_max(T): вземи от табл. 2.2 с интерполация. Парциални налягания на повърхности: p_i = φi/100 · p_max(θi); p_e = φe/100 · p_max(θe) (забележката под табл. 2.2). 

Линеен профил на парциалното налягане през z-координата (∑μd): от p_i до p_e. Плътност на дифузионния поток без конденз: g = (p_i − p_e)/z (2.3). 

4.3 Проверка за зона на кондензация

Построй p_sat-профил (по T-профила и p_max таблицата). Ако графиките p(x) и p_sat(x) се пресичат/допират → има зона(и) на кондензация; иначе — няма (фиг. 2.2–2.5, описанието за тангенти и широчина на зоната). Локализирай границите по линейна интерполация в Σ(μd)-ос. 

4.4 Количество конденз и навлажняване

Количеството конденз Wk [kg/m²] през tk: интегрирай превишението (p − p_sat)/local_z в зоната на кондензация (еквивалентно на класическия „Глазер“ по слоеве) за избрания период tk.

Нарастване на влажността в зоната Δx_dif [%] = Wk / (dz · ρ) · 100 (формула (2.27)). 

4.5 Проверки за пригодност (норма)

Вътрешна повърхност: θsi ≥ θs, където θs е от табл. 2.1 по (θi, φi). Ако не — риск от повърхностна кондензация. 

В края на tk: общата влажност x_uk′ = xr′ + Δx_dif < x_max за съответния материал (табл. 2 на Прил. №4). 

За периода на съхнене tu при зададените условия (виж т.2): изчисли обратно дифузионния поток (към вътрешността/външността според градиента) и провери целият Wk да се изпари. Ако не — неприемливо. 

5) Данни и интерполации от нормата

Таблица 2.1 (θs): двулинейна интерполация по θ и φ; при φ извън таблицата – екстраполация с предупреждение. 

Таблица 2.2 (p_max): двулинейна интерполация по T и десети градус (колоните .0 … .9). 

6) Изходи

Флагове: surface_risk (да/не), internal_condensation (да/не), drying_ok (да/не).

Числени: U, q, θsi, θs, слоеви θ на граници, p_i/p_e, g, интервал(и) на кондензация по дебелина и по Σ(μd), Wk, Δx_dif, x_uk′ срещу x_max.

Обяснителен отчет (markdown/HTML) с диаграми: T-профил, p и p_sat, визуална зона на кондензация и таблица с междинни стъпки.

7) Архитектура на кода (Python)

dataclasses:

Layer(name, d, lambda_, mu, rho, xr_percent, xmax_percent)

Assembly(layers, Rsi, Rse)

Climate(theta_i, phi_i, theta_e, phi_e)

Модули/функции:

u_value(assembly) -> (U, R_total)

temperature_profile(assembly, climate) -> list[Theta at interfaces] (2.4, 2.6) 

z_profile(assembly) -> cumulative Σ(μ·d) (2.1–2.2) 

p_max(T): lookup + интерполация от табл. 2.2. 

dew_point(theta, phi): lookup + интерполация от табл. 2.1. 

partial_pressures(climate) -> (p_i, p_e) и линеен p(x) (2.3). 

condensation_zones(p_line, p_sat_line, z_axis) → списък от интервали. 

condensate_amount(zones, ...) -> Wk и moisture_increase(Wk, dz, rho) -> Δx_dif (2.27). 

drying_check(...) -> drying_ok (при tu и условията за съхнене). 

report(...) -> HTML/MD.

8) Контроли, валидации и ръбови случаи

Забрани изчисление за конструкции към земя; маркирай „неприложимо“ (изискване от методиката). 

Предупреждавай при липсващи mu, xr′, xmax — материалът е недопустим в зона с очакван конденз. 

Проверявай единици (m, W/mK, kg/m³, Pa).

При φ/θ извън табличните граници: екстраполация с ясно обозначена несигурност.

Позволи избор на Rsi/Rse по експозиция (EN ISO 6946).